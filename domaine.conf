https://success-publishings.com/
nano /etc/apache2/sites-available/success-publishings.com.conf
<VirtualHost *:443>
    ServerName success-publishings.com
    DocumentRoot /var/www/pub

    # SSL Configuration
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/success-publishings.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/success-publishings.com/privkey.pem
    Include /etc/letsencrypt/options-ssl-apache.conf

    # Enable RewriteEngine
    RewriteEngine On

    # Handle API requests - proxy to Laravel backend
    RewriteCond %{REQUEST_URI} ^/api/(.*)$
    RewriteRule ^/api/(.*)$ /var/www/pub/pubbacken/public/index.php [L]

    # Handle storage files - serve from Laravel
    RewriteCond %{REQUEST_URI} ^/storage/(.*)$
    RewriteRule ^/storage/(.*)$ /var/www/pub/pubbacken/storage/app/public/$1 [L]

    # Everything else - proxy to Next.js on port 4000
    RewriteCond %{REQUEST_URhttps://github.com/Mounkaila144/pub.gitI} !^/api/
    RewriteCond %{REQUEST_URI} !^/storage/
    RewriteRule ^/(.*)$ http://localhost:4000/$1 [P,L]

    # Enable proxy modules
    ProxyRequests Off
    ProxyPreserveHost On
    ProxyPassReverse / http://localhost:4000/

    # Laravel backend directory configuration
    <Directory /var/www/pub/pubbacken/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.php
    </Directory>

    # Storage directory configuration
    Alias /storage /var/www/pub/pubbacken/storage/app/public
    <Directory /var/www/pub/pubbacken/storage/app/public>
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    # Logs
    ErrorLog ${APACHE_LOG_DIR}/pub-error.log
    CustomLog ${APACHE_LOG_DIR}/pub-access.log combined
</VirtualHost>

# Redirection HTTP vers HTTPS
<VirtualHost *:80>
    ServerName success-publishings.com
    Redirect permanent / https://success-publishings.com/
</VirtualHost>
root@box:~#